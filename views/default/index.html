{{extend 'layout.html'}}

{{block head}}
<script>
  var profile_url = "{{=URL('default', 'profile')}}";
  var get_auth_user_url = "{{=URL('api', 'get_auth_user')}}";
  var get_users_url = "{{=URL('api', 'get_users')}}";
  var get_enrollments_url = "{{=URL('api', 'get_enrollments')}}";
  var get_courses_url = "{{=URL('api', 'get_courses')}}";
</script>
{{end head}}

{{block header}}
{{end header}}

{{block main}}
<div id="vue-div" class="container padded" style="display:none">
  <div v-if="is_loaded">
    <!-- <div>
      <h6>Done</h6>
      <p>As a user, I want to be able to upload my transcript so that I don't have to manually enter info when someone asks for my weekly schedule/academic standing.</p>
      <p>As a user, I want to be able to make an account, so that I can save my info.</p>
      <p>As a user, I want to be able to see the information on my transcript so that I can refer back to it easily whenever I want</p>
      <p>As a user, I want to be able to discover other users who've taken this class before, or are currently taking this class, so that I can contact them for help.</p>
      <h6>Not Done</h6>
      <p>As a user, I want to be able to search either users or courses so that I find other users and courses more easily.</p>
      <p>As a user, I want to be able to be friends other users so that I can view their private info like schedules/grades.</p>
      <p>As a user, I want to be able to send other users messages (similar to email) but directly on the website so that I can contact them easily.</p>
      <p>As an admin, I want to be able to see a list of users in my organization so that I can easily see my member's info</p>
      <p>As an admin, I want to be able to find users in my org by recent quarter's gpa and cumulative gpa, so that I can see who has bad academic standing</p>
      <h6>UI Notes:</h6>
      <p>center everything</p>
      <p>Make Logo by changing font and making bolder - color: teal</p>
      <p>use vuesax for everything</p>
      <p>search bar using vuesax</p>
    </div> -->
    <div class="main_header">
      <h1>Welcome to EZOrg</h1>
      <p class="center">Click on your classes below to quickly and easily find your peers.</p>
    </div>
    <div v-if="is_transcript_loaded()">
      <ul class="center">
        <li v-for="enrollment in auth_user_current_enrollments()">
          <span v-on:click="click_course(enrollment.id)"><b>${enrollment.course_name} - ${enrollment.course_description}</b></span>
          <div v-if="clicked_courses.find(is_elem(enrollment.id))">
            <table class="enrollments">
              <caption>Currently Enrolled</caption>
              <tbody>
                <tr v-for="user in users_currently_enrolled(enrollment.course_name)">
                  <td><a href="#" v-on:click="click_user(user.id); return false;">${user.name}</a></td>
                  <td>${user.quarter}</td>
                  <td>${user.grade}</td>
                  <td><a href="#">Send Message</a></td>
                </tr>
              </tbody>
            </table>
            <table class="enrollments">
              <caption>Past Enrolled</caption>
              <tbody>
                <tr v-for="user in users_past_enrolled(enrollment.course_name)">
                  <td><a href="#" v-on:click="click_user(user.id); return false;">${user.name}</a></td>
                  <td>${user.quarter}</td>
                  <td>${user.grade}</td>
                  <td><a href="#">Send Message</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </li>
      </ul>
    </div>
    <div v-else>
      <h3>Transcript not found</h3>
      <p><span>Please upload your transcript </span><span><a href="{{=URL('default', 'profile')}}">here</a></span></p>
    </div>
  </div>
</div>
{{end main}}

{{block footer}}
{{end footer}}

{{block js}}
<script src="{{=URL('static', 'js/utils.js')}}"></script>
<script src="{{=URL('static', 'js/index.js')}}"></script>
{{end js}}
